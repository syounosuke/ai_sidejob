<!DOCTYPE html>
<html>
<head>
    <title>åŸºæœ¬ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body { padding: 20px; font-family: Arial; background: #000; color: #fff; }
        .step { padding: 10px; margin: 5px 0; background: #333; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>åŸºæœ¬å‹•ä½œãƒ†ã‚¹ãƒˆ</h1>
    
    <div id="step1" class="step">1. HTMLèª­ã¿è¾¼ã¿: âœ…</div>
    <div id="step2" class="step">2. JavaScripté–‹å§‹: âŒ</div>
    <div id="step3" class="step">3. åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ: âŒ</div>
    <div id="step4" class="step">4. Sanityæ¥ç¶šãƒ†ã‚¹ãƒˆ: âŒ</div>
    
    <div id="result" style="margin-top: 20px; padding: 20px; background: #222; border-radius: 10px;">
        çµæœå¾…æ©Ÿä¸­...
    </div>

    <script>
        console.log('=== åŸºæœ¬ãƒ†ã‚¹ãƒˆé–‹å§‹ ===');
        
        // Step 2: JavaScriptå‹•ä½œç¢ºèª
        document.getElementById('step2').innerHTML = '2. JavaScripté–‹å§‹: âœ…';
        document.getElementById('step2').style.background = '#2a5d31';
        
        // Step 3: åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
        try {
            const now = new Date().toLocaleString();
            document.getElementById('step3').innerHTML = `3. åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ: âœ… (${now})`;
            document.getElementById('step3').style.background = '#2a5d31';
        } catch (e) {
            document.getElementById('step3').innerHTML = `3. åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ: âŒ ${e.message}`;
            document.getElementById('step3').style.background = '#7d2d2d';
        }
        
        // Step 4: æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªSanityæ¥ç¶šãƒ†ã‚¹ãƒˆ
        async function testSanity() {
            const resultDiv = document.getElementById('result');
            
            try {
                resultDiv.innerHTML = 'ğŸ”„ Sanityæ¥ç¶šãƒ†ã‚¹ãƒˆä¸­...';
                
                // æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆ
                const response = await fetch('https://li8wy5y0.api.sanity.io/v2024-01-01/data/query/production?query=*%5B_type%20%3D%3D%20%22article%22%5D%5B0%5D%7Btitle%7D');
                
                resultDiv.innerHTML += `<br>ğŸ“¡ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ${response.status}`;
                
                if (response.ok) {
                    const data = await response.json();
                    document.getElementById('step4').innerHTML = '4. Sanityæ¥ç¶šãƒ†ã‚¹ãƒˆ: âœ…';
                    document.getElementById('step4').style.background = '#2a5d31';
                    
                    resultDiv.innerHTML += `<br>âœ… æˆåŠŸ!`;
                    resultDiv.innerHTML += `<br>ğŸ“Š ãƒ‡ãƒ¼ã‚¿: <pre>${JSON.stringify(data, null, 2)}</pre>`;
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
                
            } catch (error) {
                document.getElementById('step4').innerHTML = `4. Sanityæ¥ç¶šãƒ†ã‚¹ãƒˆ: âŒ ${error.message}`;
                document.getElementById('step4').style.background = '#7d2d2d';
                
                resultDiv.innerHTML += `<br>âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}`;
                resultDiv.innerHTML += `<br>ğŸŒ ãƒ–ãƒ©ã‚¦ã‚¶: ${navigator.userAgent.substring(0, 50)}...`;
                resultDiv.innerHTML += `<br>ğŸ“ URL: ${window.location.href}`;
            }
        }
        
        // 2ç§’å¾Œã«ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        setTimeout(testSanity, 2000);
    </script>
</body>
</html>